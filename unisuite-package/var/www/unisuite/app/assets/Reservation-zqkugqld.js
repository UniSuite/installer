import{_ as C,E as B,M as S,c as d,a as s,d as p,w as v,t as m,G as V,F as _,p as g,l as A,z as b,r as k,o as l,q as H,x as M,i as D,v as T}from"./index-BqJbaffH.js";import{a as F}from"./axios-BimPEqV4.js";import{d as U}from"./Datepicker-DGyT_TpK.js";const h=B(),P={data(){return{tables:"",currentHour:"",modal:"",modalData:""}},components:{datepicker:U},mounted(){h.appSidebarHide=!0,h.appHeaderHide=!0,h.appContentClass="p-0",h.appContentFullHeight=!0,F.get("/assets/data/pos/table-booking.json").then(e=>{this.tables=e.data.tables})},beforeUnmount(){h.appSidebarHide=!1,h.appHeaderHide=!1,h.appContentClass="",h.appContentFullHeight=!1},methods:{checkTime(e){return e<10&&(e="0"+e),e},getTime(){var e=new Date,t=e.getHours(),i=e.getMinutes(),c=e.getSeconds(),a;return i=this.checkTime(i),c=this.checkTime(c),a=t>11?"pm":"am",t=t>12?t-12:t,setTimeout(this.getTime,500),t+":"+i+a},getAvailableTable(){var e=0,t=new Date,i=t.getHours(),c;c=i>11?"pm":"am",i=i>12?i-12:i,this.currentHour=this.checkTime(i)+":00"+c;for(var a=0;a<this.tables.length;a++)for(var o=0;o<this.tables[a].reservation.length;o++)this.tables[a].reservation[o].time==this.currentHour&&!this.tables[a].reservation[o].text&&e++;return e},getStatus(i,t){var i=i.split(":"),c=i[1].split("00"),a=c[1],o=parseInt(i[0]),u=a=="pm"&&o<12?o+12:o,x=new Date,f=x.getHours();return u==f&&t?"in-progress":f>u&&t?"completed":f<u&&t?"upcoming":""},checkSameHour(e){var t=new Date,i=t.getHours(),c=i>12?"pm":"am",a=i>12?i-12:i,a=a<10?"0"+a:a,o=a+":00"+c;return o==e},checkAvailable(e){for(var t=0;t<e.length;t++){var i=e[t].time.split(":"),c=parseInt(i[0]),a=new Date,o=a.getHours();if(o=o>12?o-12:o,o==c&&e.text)return!0}return!1},showBookingModal(e,t){e.preventDefault(),this.modalData=t,this.modal=new S(this.$refs.modalPosBooking),this.modal.show()},submitBooking(){for(var e=0;e<this.tables.length;e++)this.tables[e].id==this.modalData.id&&(this.tables[e]=this.modalData);this.modal.hide()}}},R={class:"pos pos-vertical pos-with-header",id:"pos"},N={class:"pos-container"},z={class:"pos-header"},E={class:"logo"},I={class:"time",id:"time"},L={class:"nav"},O={class:"nav-item"},j={class:"nav-item"},q={class:"nav-item"},G={class:"nav-item"},K={class:"pos-content"},J={class:"pos-content-container h-100 p-4","data-scrollbar":"true","data-height":"100%"},Q={class:"d-md-flex align-items-center mb-4"},W={class:"flex-1"},X={class:"fs-24px mb-1"},Y={class:"w-250px"},Z={class:"row gx-4"},$={class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},ss={class:"pos-table-booking-container"},ts={class:"pos-table-booking-header"},es={class:"d-flex align-items-center"},as={class:"flex-1"},os={class:"no"},is={class:"desc"},ls={key:0,class:"pe-1 text-success"},ns={key:1,class:"text-danger text-opacity-25"},ds={class:"pos-table-booking-body"},rs={class:"time"},cs={class:"info"},ms={key:0,class:"fa fa-circle"},us=["onClick"],ps={key:1,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},vs={class:"modal modal-pos fade",ref:"modalPosBooking"},hs={class:"modal-dialog modal-lg"},_s={class:"modal-content border-0"},fs={class:"modal-header align-items-center"},gs={class:"modal-title d-flex align-items-end"},bs={class:"modal-body"},ks={class:"row"},xs={class:"col-lg-6"},ws={key:0,class:"form-group mb-2"},ys={class:"input-group"},Hs={class:"input-group-text fw-bold w-90px fs-13px"},Ds=["onUpdate:modelValue"],Ts={class:"col-lg-6"},Cs={key:0,class:"form-group mb-2"},Bs={class:"input-group"},Ss={class:"input-group-text fw-bold w-90px fs-13px"},Vs=["onUpdate:modelValue"];function As(e,t,i,c,a,o){const u=k("RouterLink"),x=k("datepicker"),f=k("card-body"),y=k("card");return l(),d(_,null,[s("div",R,[s("div",N,[s("div",z,[s("div",E,[p(u,{to:"/pos/gastro/reservation"},{default:v(()=>t[1]||(t[1]=[s("div",{class:"logo-img"},[s("i",{class:"fa fa-bowl-rice",style:{"font-size":"1.5rem"}})],-1),s("div",{class:"logo-text"},"Pine & Dine",-1)])),_:1})]),s("div",I,m(o.getTime()),1),s("div",L,[s("div",O,[p(u,{to:"/pos/gastro/reservation",class:"nav-link text-theme"},{default:v(()=>t[2]||(t[2]=[s("i",{class:"far fa-calendar-check nav-icon"},null,-1)])),_:1})]),s("div",j,[p(u,{to:"/pos/gastro/order",class:"nav-link"},{default:v(()=>t[3]||(t[3]=[s("i",{class:"far fa-cash-register nav-icon"},null,-1)])),_:1})]),s("div",q,[p(u,{to:"/pos/gastro/kitchendisplay",class:"nav-link"},{default:v(()=>t[4]||(t[4]=[s("i",{class:"far fa-tv nav-icon"},null,-1)])),_:1})]),s("div",G,[p(u,{to:"/pos/gastro/checkout",class:"nav-link"},{default:v(()=>t[5]||(t[5]=[s("i",{class:"fa fa-receipt nav-icon"},null,-1)])),_:1})])])]),s("div",K,[s("div",J,[s("div",Q,[s("div",W,[s("div",X,"Tisch Reservierung ("+m(o.getAvailableTable())+"/"+m(a.tables.length)+")",1),t[6]||(t[6]=V('<div class="mb-2 mb-md-0 d-flex"><div class="d-flex align-items-center me-3"><i class="fa fa-circle fa-fw text-inverse text-opacity-25 fs-9px me-1"></i> Completed </div><div class="d-flex align-items-center me-3"><i class="fa fa-circle fa-fw text-warning fs-9px me-1"></i> Upcoming </div><div class="d-flex align-items-center me-3"><i class="fa fa-circle fa-fw text-success fs-9px me-1"></i> In-progress </div></div>',1))]),s("div",Y,[p(x)])]),s("div",Z,[a.tables?(l(!0),d(_,{key:0},g(a.tables,n=>(l(),d("div",$,[p(y,{class:"pos-table-booking"},{default:v(()=>[p(f,{class:"p-1"},{default:v(()=>[s("div",ss,[s("div",ts,[s("div",es,[s("div",as,[t[7]||(t[7]=s("div",{class:"title"},"Tisch",-1)),s("div",os,m(n.name),1),s("div",is,"max "+m(n.pax)+" Personen",1)]),o.checkAvailable(n.reservation)?(l(),d("div",ls,t[8]||(t[8]=[s("i",{class:"bi bi-check2-circle fa-3x"},null,-1)]))):(l(),d("div",ns,t[9]||(t[9]=[s("i",{class:"fa-regular fa-circle-xmark fa-3x"},null,-1)])))])]),s("div",ds,[(l(!0),d(_,null,g(n.reservation,r=>(l(),d("div",{class:H(["booking",{highlight:o.checkSameHour(r.time)}])},[s("div",rs,m(r.time),1),s("div",cs,m(r.text?r.text:"-"),1),s("div",{class:H(["status",o.getStatus(r.time,r.text)])},[r.text?(l(),d("i",ms)):b("",!0)],2)],2))),256))])]),s("a",{href:"#",class:"stretched-link",onClick:r=>o.showBookingModal(r,n)},null,8,us)]),_:2},1024)]),_:2},1024)]))),256)):(l(),d("div",ps," Keine EintrÃ¤ge gefunden. "))])])])])]),s("div",vs,[s("div",hs,[s("div",_s,[a.modalData?(l(),A(y,{key:0},{default:v(()=>[s("form",{onSubmit:t[0]||(t[0]=M((...n)=>o.submitBooking&&o.submitBooking(...n),["prevent"]))},[p(f,{class:"p-0"},{default:v(()=>[s("div",fs,[s("h5",gs," Tisch "+m(a.modalData.name),1),t[10]||(t[10]=s("a",{href:"#","data-bs-dismiss":"modal",class:"ms-auto btn-close"},null,-1))]),s("div",bs,[s("div",ks,[s("div",xs,[(l(!0),d(_,null,g(a.modalData.reservation,(n,r)=>(l(),d(_,null,[r<=7?(l(),d("div",ws,[s("div",ys,[s("div",Hs,m(n.time),1),D(s("input",{type:"text",class:"form-control",placeholder:"","onUpdate:modelValue":w=>n.text=w},null,8,Ds),[[T,n.text]])])])):b("",!0)],64))),256))]),s("div",Ts,[(l(!0),d(_,null,g(a.modalData.reservation,(n,r)=>(l(),d(_,null,[r>7?(l(),d("div",Cs,[s("div",Bs,[s("div",Ss,m(n.time),1),D(s("input",{type:"text",class:"form-control",placeholder:"","onUpdate:modelValue":w=>n.text=w},null,8,Vs),[[T,n.text]])])])):b("",!0)],64))),256))])])]),t[11]||(t[11]=s("div",{class:"modal-footer"},[s("a",{href:"#",class:"btn btn-default w-100px","data-bs-dismiss":"modal"},"Abbrechen"),s("button",{type:"submit",class:"btn btn-success w-120px"},"Reservieren")],-1))]),_:1})],32)]),_:1})):b("",!0)])])],512)],64)}const Ps=C(P,[["render",As]]);export{Ps as default};
